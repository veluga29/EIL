# 파이썬으로 살펴보는 아키텍처 패턴: TDD, DDD, EDM 적용하기
# 목표 아키텍처
## Part 1 아키텍처 다이어그램

![[apfp_target_architecture1.jpeg]]

## Part 2 아키텍처 다이어그램


# Chapter 0 Big Ball of Mud에 대한 접근

## Big Ball of Mud 안티패턴

처음에 깔끔한 작성을 목표로 시작한 소프트웨어 시스템도 시간이 지나면서 모든 요소 (도메인 지식, 비즈니스 로직, 로깅, 이메일 보내기 etc…)들이 서로 Coupling(결합)되어 시스템의 일부를 바꾸는 것도 힘들어지는 상황

## Big Ball of Mud를 피하기 위한 일반적인 접근

### 1. Abstraction(추상화) & Encapsulation(캡슐화)
행동을 캡슐화하여 추상화로 사용하는 것은 코드의 표현력을 높이고 테스트와 유지보수를 더 쉽게 만든다.
### 2. Layering(계층화)
Layering Architecture는 복잡한 의존성들을 해결한다. 코드의 역할을 구분하고 범주(category)를 나눠 어떤 코드 범주가 특정 코드 범주를 호출할 수 있는지 규칙을 정한다. 도메인 모델(Domain Model)로 비즈니스 계층을 만들고, 모든 비즈니스 로직을 이곳에 모아야 한다.

>3-Layer Architecture:
>표현 계층 (UI or API or CLI…)
>------------|------------
>비즈니스 로직 (Business Rules & Workflows)
>------------|------------
>데이터베이스 계층 (Data Read & Write)
 
### 3. DIP (Dependency Inversion Principle, 의존성 역전 원칙)
비즈니스 코드는 기술적인 세부 사항에 의존해서는 안된다. 서로 추상화를 사용해 강한 의존성을 해소하여 각자가 독립적으로 변경될 수 있는 환경을 만들어야 한다.

예를 들어, 인프라를 바꿔야 하는 필요성이 있을 때 비즈니스 계층을 변경하지 않고도 인프라 세부 사항을 바꿀 수 있어야 한다.

>DIP의 정의
>1. 고수준 모듈은 저수준 모듈에 의존해서는 안된다. 두 모듈 모두 추상화에 의존해야 한다.
>2. 추상화는 세부 사항에 의존해서는 안된다. 반대로 세부 사항은 추상화에 의존해야 한다.